---
title: How to encrypt EBS volume
description: Step-by-step guide about how to encrypt EBS volume using web interface or PowerShell
published: 2019-10-05
modified: 2020-10-09
image: /assets/img/articles/how-to-encrypt-ebs-volume/title.png
preview: /assets/img/articles/how-to-encrypt-ebs-volume/title.png
tags: [devops, aws, cloud, security]
permalink: /how-to-encrypt-ebs-volume
enlink: /how-to-encrypt-ebs-volume
rulink: /как-зашифровать-ebs-том
affiliate:
  link: https://go.nordvpn.net/aff_c?offer_id=15&aff_id=42754&url_id=902
  banner: affiliate-banners-650x1200-en-v3.jpg
  text: NordVPN - fastest in the world
---

{% include breadcrumbs.html %}
<article itemscope itemtype="https://schema.org/Article">
	{% include header.html %}	
	<div class="mb-0" itemscope itemtype="https://schema.org/HowTo">
		<meta itemprop="name" content="{{ page.title }}">
		<meta itemprop="totalTime" content="PT1H">
		<p itemprop="description">         
			In this article, I will show you how to encrypt existing EBS volume using AWS web portal or PowerShell. 
			You will need <span itemprop="supply" itemtype="https://schema.org/HowToSupply">1 hour</span>(depends on your volume size) to <span itemprop="tool" itemtype="https://schema.org/HowToTool">follow these steps</span>:</p>
		</p>
		<ul class="list-unstyled">             
			<li>Go to <a href="https://console.aws.amazon.com/ec2" target="_blank">https://console.aws.amazon.com/ec2</a> and navigate to instances</li>
			<li id="stop-instance" itemprop="step" itemscope itemtype="http://schema.org/HowToStep">
				<meta itemprop="url" content="https://sypalo.com/how-to-encrypt-ebs-volume#stop-instance">
				<meta itemprop="name" content="Stop instance">
				<meta itemprop="image" content="https://sypalo.com/assets/img/articles/how-to-encrypt-ebs-volume/stop-instance.png">
				<figure class="figure mx-auto d-block">
					<figcaption class="mb-2" itemprop="text">
						Stop instance which volume you want to encrypt
					</figcaption>
					<img class="img-fluid mx-auto d-block" src="/assets/img/articles/how-to-encrypt-ebs-volume/stop-instance.png" alt="Stopping the instance" />
				</figure>
			</li>		
			<li id="get-attached-volume-id" itemprop="step" itemscope itemtype="http://schema.org/HowToStep">
				<meta itemprop="url" content="https://sypalo.com/how-to-encrypt-ebs-volume#get-attached-volume-id">
				<meta itemprop="name" content="Get attached volume id">
				<meta itemprop="image" content="https://sypalo.com/assets/img/articles/how-to-encrypt-ebs-volume/get-attached-volume-id.png">
				<figure class="figure mx-auto d-block">
					<figcaption class="mb-2" itemprop="text">
						Expand the bottom pane and switch to the «Storage» tab, so you see a link to the instance's volume at the bottom of the page
					</figcaption>
					<img class="img-fluid mx-auto d-block" src="/assets/img/articles/how-to-encrypt-ebs-volume/get-attached-volume-id.png" alt="Get attached volume id" />
				</figure>
			</li>			
			<li id="create-snapshot" itemprop="step" itemscope itemtype="http://schema.org/HowToStep">
				<meta itemprop="url" content="https://sypalo.com/how-to-encrypt-ebs-volume#create-snapshot">
				<meta itemprop="name" content="Create snapshot">
				<meta itemprop="image" content="https://sypalo.com/assets/img/articles/how-to-encrypt-ebs-volume/get-attached-volume-id.png">
				<figure class="figure mx-auto d-block">
					<figcaption class="mb-2" itemprop="text">
						Click on it and you will notice that volume isn't encrypted, so you have to right-click and select «Create snapshot»
					</figcaption>
					<img class="img-fluid mx-auto d-block" src="/assets/img/articles/how-to-encrypt-ebs-volume/create-snapshot.png" alt="Create snapshot" />
				</figure>
			</li>
			<li id="provide-snapshot-details" itemprop="step" itemscope itemtype="http://schema.org/HowToStep">
				<meta itemprop="url" content="https://sypalo.com/how-to-encrypt-ebs-volume#provide-snapshot-details">
				<meta itemprop="name" content="Create snapshot">
				<meta itemprop="image" content="https://sypalo.com/assets/img/articles/how-to-encrypt-ebs-volume/provide-snapshot-details.png">
				<figure class="figure mx-auto d-block">
					<figcaption class="mb-2" itemprop="text">
						Provide a name and a description to easily find the snapshot and click «Create Snapshot»
					</figcaption>
					<img class="img-fluid mx-auto d-block" src="/assets/img/articles/how-to-encrypt-ebs-volume/provide-snapshot-details.png" alt="Provide snapshot details" />
				</figure>
			</li>
			<li id="create-encrypted-volume" itemprop="step" itemscope itemtype="http://schema.org/HowToStep">
				<meta itemprop="url" content="https://sypalo.com/how-to-encrypt-ebs-volume#create-encrypted-volume">
				<meta itemprop="name" content="Create encrypted volume">
				<meta itemprop="image" content="https://sypalo.com/assets/img/articles/how-to-encrypt-ebs-volume/create-encrypted-volume.png">
				<figure class="figure mx-auto d-block">
					<figcaption class="mb-2" itemprop="text">
						Navigate to snapshots, right-click on that one we created and select «Create Volume», notice that snapshot is not encrypted
					</figcaption>
					<img class="img-fluid mx-auto d-block" src="/assets/img/articles/how-to-encrypt-ebs-volume/create-encrypted-volume.png" alt="Create encrypted volume" />
				</figure>
			</li>
			<li id="provide-encrypted-volume-details" itemprop="step" itemscope itemtype="http://schema.org/HowToStep">
				<meta itemprop="url" content="https://sypalo.com/how-to-encrypt-ebs-volume#provide-encrypted-volume-details">
				<meta itemprop="name" content="Provide encrypted volume details">
				<meta itemprop="image" content="https://sypalo.com/assets/img/articles/how-to-encrypt-ebs-volume/provide-encrypted-volume-details.png">
				<figure class="figure mx-auto d-block">
					<figcaption class="mb-2" itemprop="text">
						To create encrypted volume from an unencrypted snapshot, select the same availability zone and checkmark the appropriate checkbox and click «Create Volume»
					</figcaption>
					<img class="img-fluid mx-auto d-block" src="/assets/img/articles/how-to-encrypt-ebs-volume/provide-encrypted-volume-details.png" alt="Provide encrypted volume details" />
				</figure>
			</li>			
			<li>Once we have a volume created, go back to EC2 instances section and locate your instance</li>
			<li>Write down current Device name attachement info, for Linux instances, it's usually /dev/xvda</li>
			<li>Click on the currently attached volume, so you will be sent to the volumes section again, but filtered out to show you only one volume, so you won't misclick and disconnect a volume from another instance</li>
			<li id="detach-unencrypted-volume" itemprop="step" itemscope itemtype="http://schema.org/HowToStep">
				<meta itemprop="url" content="https://sypalo.com/how-to-encrypt-ebs-volume#detach-unencrypted-volume">
				<meta itemprop="name" content="Detach volume">
				<meta itemprop="image" content="https://sypalo.com/assets/img/articles/how-to-encrypt-ebs-volume/detach-unencrypted-volume.png">
				<figure class="figure mx-auto d-block">
					<figcaption class="mb-2" itemprop="text">
						Right-click on the volume and click «Detach Volume»
					</figcaption>
					<img class="img-fluid mx-auto d-block" src="/assets/img/articles/how-to-encrypt-ebs-volume/detach-unencrypted-volume.png" alt="Detach unencrypted volume" />
				</figure>
			</li>			
			<li id="attach-encrypted-volume" itemprop="step" itemscope itemtype="http://schema.org/HowToStep">
				<meta itemprop="url" content="https://sypalo.com/how-to-encrypt-ebs-volume#attach-encrypted-volume">
				<meta itemprop="name" content="Attach encrypted volume">
				<meta itemprop="image" content="https://sypalo.com/assets/img/articles/how-to-encrypt-ebs-volume/attach-encrypted-volume.png">
				<figure class="figure mx-auto d-block">
					<figcaption class="mb-2" itemprop="text">
						Right-click on encrypted volume and select «Attach Volume», notice it's encrypted
					</figcaption>
					<img class="img-fluid mx-auto d-block" src="/assets/img/articles/how-to-encrypt-ebs-volume/attach-encrypted-volume.png" alt="Attach encrypted volume" />
				</figure>
			</li>
			<li id="provide-instance-details" itemprop="step" itemscope itemtype="http://schema.org/HowToStep">
				<meta itemprop="url" content="https://sypalo.com/how-to-encrypt-ebs-volume#provide-instance-details">
				<meta itemprop="name" content="Provide instance details">
				<meta itemprop="image" content="https://sypalo.com/assets/img/articles/how-to-encrypt-ebs-volume/provide-instance-details.png">
				<figure class="figure mx-auto d-block">
					<figcaption class="mb-2" itemprop="text">
						Provide instance id you are attaching the volume to and the device name (you noted on step 15) and click attach
					</figcaption>
					<img class="img-fluid mx-auto d-block" src="/assets/img/articles/how-to-encrypt-ebs-volume/provide-instance-details.png" alt="Provide instance details" />
				</figure>
			</li>			
		</ul>
		<p>
			That's it, later you can remove unencrypted volume and snapshot
		</p>
		<h2 class="h5">Encrypt existing EBS volume using PowerShell</h2>
<pre><code>
Set-AWSCredential -AccessKey access_key_id -SecretKey secret_key -StoreAs aws_creds

$name = Read-Host "VM name"
$region = "eu-central-1"

$vm = (Get-EC2Instance -Region $region -ProfileName aws_creds).Instances | ? { ($_.tags | ? Key -eq Name).Value -eq $name }   

Write-Host "Stopping $name"
Stop-EC2Instance $vm -Region $region -ProfileName aws_creds
while ((Get-EC2Instance $vm -Region $region -ProfileName aws_creds).Instances.State.Name.Value -ne "stopped") {
	Start-Sleep -s 10
}

Write-Host "Creating $name snapshot"
$vol = Get-EC2Volume -Region $region -ProfileName aws_creds | ? { $_.Attachments.InstanceId -eq $vm.InstanceId }
$snapshot = New-EC2Snapshot $vol.VolumeId $name -Region $region -ProfileName aws_creds
while ((Get-EC2Snapshot -Region $region -ProfileName aws_creds | ? Description -eq $name).State -ne "completed") {
	Start-Sleep -s 10
}

Write-Host "Creating $name encrypted volume"
$tag = @{ Key="Name"; Value=$name }
$tagspec = new-object Amazon.EC2.Model.TagSpecification
$tagspec.ResourceType = "volume"
$tagspec.Tags.Add($tag)
$newvol = New-EC2Volume $snapshot.SnapshotId -Encrypted $true -TagSpecification $tagspec -AvailabilityZone $vol.AvailabilityZone -Region $region -ProfileName aws_creds   
	
Write-Host "Waiting for volume to become available"
while ((Get-EC2Volume -VolumeId $newvol.VolumeId -Region $region -ProfileName aws_creds).State -ne "available") {
	Start-Sleep -s 15
}
	
Write-Host "Detaching existing unencrypted volume from $name"
Dismount-EC2Volume -VolumeId $vol.VolumeId -Region $region -ProfileName aws_creds
Write-Host "Attaching encrypted volume to $name"
while ((Get-EC2Volume -VolumeId $vol.VolumeId -Region $region -ProfileName aws_creds).State -ne "available") {
	Start-Sleep -s 15
}
Add-EC2Volume -InstanceId $vm.InstanceId -VolumeId $newvol.VolumeId -Device $vm.RootDeviceName -Region $region -ProfileName aws_creds
	
Start-EC2Instance $vm -Region $region -ProfileName aws_creds

Write-Host "Removing $name unencrypted volume"
Remove-EC2Volume $vol -Region $region -ProfileName aws_creds
</code></pre>
	  
	</div>

	<footer>
		<hr>
	</footer>
</article>